<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> -->
</head>
<body>
    <div class="screen">
        <div class="viewport">
            <div class="pages" id="pages">
                <!-- <div class="page">
                </div> -->
            </div>
        </div>
        
        <div class="controls">
            <i class="icons fas fa-angle-double-left"></i>
            <i class="icons fas fa-angle-left"></i>
            <span>
                <label for="pageForm__input">PAGE : </label> 
            </span>
            <form id="pageForm">
                <input 
                    type="number" 
                    min="1"
                    max="400"
                    id="pageForm__input"/>
                <input type="submit" class="hidden"/>
            </form>
            <span> | </span>
            <span id="number-pages">400</span>
            <i class="icons fas fa-angle-right"></i>
            <i class="icons fas fa-angle-double-right"></i>
        </div>
    </div>


    <script type="text/javascript">
        const PAGE_KEY = "page";
        const savedPage = localStorage.getItem(PAGE_KEY);
        const pageForm = document.querySelector("#pageForm");
        const pageForm__input = document.querySelector("#pageForm__input");
        const newDiv = document.createElement("div");
        const page = document.querySelector('.page');
        const pages = document.querySelector('.pages');
        const viewport = document.querySelector('.viewport');
        const pageH = document.querySelector('.pages').clientHeight;
        
        
        pageForm__input.setAttribute('placeholder',savedPage);
        pageForm.addEventListener("submit", savePage);
        
        function loadPage() {
            document.getElementById("pages").appendChild(newDiv);
            newDiv.classList.add('page');
            newDiv.style.backgroundImage = "url(" + "pages/" + savedPage +".jpg" +")";
            
            document.querySelector('.page').style.width = pageH*.7 +'px';
        }
        
        function firstPage() {
            localStorage.setItem(PAGE_KEY, 1);
        }
        
        function savePage() {
            const pageNum = pageForm__input.value;
            localStorage.clear()
            localStorage.setItem(PAGE_KEY, pageNum);
        }
        
        if (savedPage === null) {
            firstPage();
        } else {
            loadPage();
        }
        window.onresize = function(){
            const pageH = document.querySelector('.pages').clientHeight;
            document.querySelector('.page').style.width = pageH*.7 +'px';
            console.log(pageH);
        }
        // 리사이즈

    </script>

<!-- <script src="search.js"></script> -->
<!-- icon -->
<script src="https://kit.fontawesome.com/e4704dcbbd.js" crossorigin="anonymous"></script>
</body>
</html>