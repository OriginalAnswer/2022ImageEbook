<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> -->
</head>
<body>
    <button onclick="clickBtnFirst()" class="hidden Btn Btn__first" id="Btn__first"></button>
    <input type="button" onclick="clickBtn" class="hidden Btn Btn__prev" id="Btn__prev"/>
    <input type="button" onclick="clickBtn" class="hidden Btn Btn__next" id="Btn__next"/>
    <input type="button" onclick="clickBtn" class="hidden Btn Btn__last" id="Btn__last"/>
    <div class="screen">
        <div class="viewport">
            <div class="pages" id="pages">
                <!-- <div class="page">
                </div> -->
            </div>
        </div>
        
        <div class="controls">
            <label for="Btn__first">
                <i class="icon icon__first fas fa-angle-double-left"></i>
            </label>
            <label for="Btn__prev">
                <i class="icon icon__prev fas fa-angle-left"></i>
            </label>
            <span>
                <label for="pageForm__input">PAGE : </label> 
            </span>
            <form id="pageForm">
                <input 
                    type="number" 
                    min="1"
                    max="400"
                    id="pageForm__input"/>
                <input type="submit" class="hidden"/>
            </form>
            <span> of </span><span id="number-pages">400</span>
            <label for="Btn__next">
                <i class="icon icon__next fas fa-angle-right"></i>
            </label>
            <label for="Btn__last">
                <i class="icon icon__last fas fa-angle-double-right"></i>
            </label>
        </div>
    </div>
    

    <script type="text/javascript">
        const PAGE_KEY = "page";
        const savedPage = localStorage.getItem(PAGE_KEY);
        const pageForm = document.querySelector("#pageForm");
        const pageForm__input = document.querySelector("#pageForm__input");
        const newDiv = document.createElement("div");
        const page = document.querySelector('.page');
        const pages = document.querySelector('.pages');
        const viewport = document.querySelector('.viewport');
        const pageH = document.querySelector('.pages').clientHeight;
        
        const Btn__first = document.querySelector('#Btn__first');
        const Btn__prev = document.querySelector('#Btn__prev');
        const Btn__next = document.querySelector('#Btn__next');
        const Btn__last = document.querySelector('#Btn__last');
        
        pageForm__input.setAttribute('placeholder',savedPage);
        pageForm.addEventListener("submit", savePage);
        
        function loadPage() {
            document.getElementById("pages").appendChild(newDiv);
            newDiv.classList.add('page');
            newDiv.style.backgroundImage = "url(" + "pages/" + savedPage +".jpg" +")";
            document.querySelector('.page').style.height = '100%';
            document.querySelector('.page').style.width = pageH*.7 +'px';
            const pageW = document.querySelector('.page').clientWidth;
            if (pageW <= 400) {
                document.querySelector('.pages').style.height = '50%';
            };
        }
        
        function firstPage() {
            localStorage.setItem(PAGE_KEY, 1);
            location.reload();
        }
        
        function savePage() {
            const pageNum = pageForm__input.value;
            localStorage.clear()
            localStorage.setItem(PAGE_KEY, pageNum);
        }

        if (savedPage === null) {
            firstPage();
        } else {
            loadPage();
        }
        
            window.onresize = function(){
                const pageH = document.querySelector('.page').clientHeight;
                document.querySelector('.page').style.width = pageH*.7 +'px';
            }
                </script>

<!-- <script src="search.js"></script> -->
<!-- icon icon__ -->
<script src="https://kit.fontawesome.com/e4704dcbbd.js" crossorigin="anonymous"></script>
</body>
</html>